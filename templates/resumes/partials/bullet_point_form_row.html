{% comment %}
This is the updated partial template for a project bullet point form row
Save as 'resumes/theme_partials/bullet_point_form_row.html'
{% endcomment %}

<div class="bullet-point-row flex items-start gap-3 group hover:bg-gray-50/80 dark:hover:bg-gray-800/20 p-2 rounded-md transition-colors">
    <div class="mt-3 text-blue-600 dark:text-blue-400">•</div>
    <div class="flex-1">
        <div class="relative">
            <textarea class="w-full min-h-24 p-2 border border-gray-300 rounded-md focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                id="bullet_{{ parent_index }}_{{ index }}"
                name="bullet_{{ parent_index }}_{{ index }}"
                placeholder="Describe your project achievement with action verbs and measurable results (e.g., 'Developed a responsive dashboard that reduced data retrieval time by 40%')"
                onkeyup="checkBulletQuality(this)"
                data-parent="{{ parent_index }}"
                data-index="{{ index }}">{{ bullet_text|default:'' }}</textarea>
        </div>
        <div class="flex justify-between mt-1">
            <div class="bullet-quality text-xs"></div>
            <div class="text-xs text-gray-500">
                <span class="current">{{ bullet_text|default:''|length }}</span>/<span class="max">100-150 optimal</span>
            </div>
        </div>
    </div>
    <div class="flex flex-col gap-2">
        <button type="button" class="mt-3 h-8 w-8 rounded-full text-red-600 bg-red-100 opacity-70 hover:opacity-100 hover:bg-red-200 flex items-center justify-center"
                onclick="removeBulletPoint(this, '{{ parent_index }}')">
            <i class="fa-solid fa-times"></i>
        </button>
        <button type="button"
                class="h-8 w-8 rounded-full text-blue-600 bg-blue-100 opacity-70 hover:opacity-100 hover:bg-blue-200 flex items-center justify-center project-enhance-btn"
                data-parent="{{ parent_index }}"
                data-index="{{ index }}"
                data-project-name="{{ project_name|default:'' }}"
                data-project-title="{{ project_title|default:'' }}"
                data-project-summary="{{ project_summary|default:'' }}"
                onclick="openProjectEnhanceModal('{{ parent_index }}', '{{ index }}', '{{ project_name|default:'' }}', '{{ project_title|default:'' }}', '{{ project_summary|default:'' }}')">
            <i class="fa-solid fa-wand-magic-sparkles"></i>
        </button>
        <span id="enhance_indicator_{{ parent_index }}_{{ index }}" class="htmx-indicator hidden">
            <span class="inline-block animate-spin text-blue-500">⟳</span>
        </span>
    </div>
</div>

{#{% comment %}#}
{#CORRECTED partial template for a bullet point form row#}
{#File: resumes/theme_partials/bullet_point_form_row.html#}
{#{% endcomment %}#}
{##}
{#<div class="bullet-point-row flex items-start gap-3 group hover:bg-gray-50/80 dark:hover:bg-gray-800/20 p-2 rounded-md transition-colors">#}
    {# Bullet Point Marker #}
{#    <div class="mt-3 text-indigo-600">•</div> {# Adjusted color to match template standard, change 'text-indigo-600' back to 'text-primary' if needed for your theme #}
{##}
    {# Textarea and Quality Indicators #}
{#    <div class="form-control flex-1">#}
{#        <div class="relative">#}
            {# Textarea - Using standard template classes for consistency, but keeping your focus styling. Adjust if needed. #}
{#            <textarea class="w-full min-h-24 py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 sm:text-sm pr-8" {# Original classes: textarea textarea-bordered w-full min-h-24 focus:border-primary focus:ring-1 focus:ring-primary pr-8 #}
{#                id="bullet_{{ parent_index }}_{{ index }}"#}
{#                name="bullet_{{ parent_index }}_{{ index }}"#}
{#                placeholder="Describe your achievement with action verbs and measurable results (e.g., 'Increased customer satisfaction by 20% through implementation of new service protocols')"#}
{#                onkeyup="checkBulletQuality(this)"#}
{#                data-parent="{{ parent_index }}"#}
{#                data-index="{{ index }}"#}
{#                >{{ bullet_text|default:'' }}</textarea> {# Value is pre-filled if bullet_text exists #}
{#        </div>#}
{#        <div class="flex justify-between mt-1">#}
{#            <div class="bullet-quality text-xs"></div> {# Populated by checkBulletQuality JS #}
{#            <div class="text-xs char-counter text-gray-500">#}
{#                <span class="current">{{ bullet_text|default:''|length }}</span>/<span class="max">100-150 optimal</span>#}
{#            </div>#}
{#        </div>#}
{#    </div>#}
{##}
    {# Action Buttons (Remove, Enhance) #}
{#    <div class="flex flex-col gap-2">#}
        {# Remove Button - Using standard template classes for consistency. Keep your 'btn' classes if preferred, onclick is key. #}
{#        <button type="button" class="inline-flex items-center justify-center h-8 w-8 rounded-full border border-gray-300 bg-white text-red-500 hover:bg-red-50 hover:text-red-700 mt-3 transition-all" {# Original classes: btn btn-circle btn-outline btn-error btn-sm mt-3 opacity-70 hover:opacity-100 hover:bg-error hover:text-white transition-all #}
{#                onclick="removeBulletPoint(this, '{{ parent_index }}')">#}
{#            <i class="fa-solid fa-times"></i>#}
{#        </button>#}
{##}
        {# Enhance Button - CORRECTED to work with JS #}
{#        <button type="button"#}
{#                class="enhance-bullet-btn inline-flex items-center justify-center h-8 w-8 rounded-full border border-gray-300 bg-white text-indigo-500 hover:bg-indigo-50 hover:text-indigo-700 transition-all" {# ADDED 'enhance-bullet-btn', using standard template classes. Add back your 'btn' classes if needed for styling, e.g., class="enhance-bullet-btn btn btn-circle..." #}
{#                data-parent="{{ parent_index }}"  {# ADDED data-parent attribute #}
{#                data-index="{{ index }}">         {# ADDED data-index attribute #}
            {# REMOVED inline onclick attribute #}
{#            <i class="fa-solid fa-wand-magic-sparkles"></i>#}
{#        </button>#}
{##}
        {# Loading Indicator Span #}
{#        <span id="enhance_indicator_{{ parent_index }}_{{ index }}" class="htmx-indicator hidden flex items-center justify-center h-8 w-8"> {# Matches template structure, hidden by default #}
             {# Use your preferred loading indicator element #}
{#             <span class="loading loading-spinner loading-xs"></span>#}
             {# Or use template default: <span class="animate-spin h-4 w-4 border-2 border-indigo-500 rounded-full border-t-transparent"></span> #}
{#        </span>#}
{#    </div>#}
{#</div>#}
{##}
{#{% comment %}#}
{#This is the updated partial template for a bullet point form row#}
{#Save as 'resumes/theme_partials/bullet_point_form_row.html'#}
{#{% endcomment %}#}
{##}
{#<div class="bullet-point-row flex items-start gap-3 group hover:bg-gray-50/80 dark:hover:bg-gray-800/20 p-2 rounded-md transition-colors">#}
{#    <div class="mt-3 text-primary">•</div>#}
{#    <div class="form-control flex-1">#}
{#        <div class="relative">#}
{#            <textarea class="textarea textarea-bordered w-full min-h-24 focus:border-primary focus:ring-1 focus:ring-primary pr-8"#}
{#                id="bullet_{{ parent_index }}_{{ index }}"#}
{#                name="bullet_{{ parent_index }}_{{ index }}"#}
{#                placeholder="Describe your achievement with action verbs and measurable results (e.g., 'Increased customer satisfaction by 20% through implementation of new service protocols')"#}
{#                onkeyup="checkBulletQuality(this)"#}
{#                data-parent="{{ parent_index }}"#}
{#                data-index="{{ index }}">{{ bullet_text|default:'' }}</textarea>#}
{#        </div>#}
{#        <div class="flex justify-between mt-1">#}
{#            <div class="bullet-quality text-xs"></div>#}
{#            <div class="text-xs char-counter text-gray-500">#}
{#                <span class="current">{{ bullet_text|default:''|length }}</span>/<span class="max">100-150 optimal</span>#}
{#            </div>#}
{#        </div>#}
{#    </div>#}
{#    <div class="flex flex-col gap-2">#}
{#        <button type="button" class="btn btn-circle btn-outline btn-error btn-sm mt-3 opacity-70 hover:opacity-100 hover:bg-error hover:text-white transition-all"#}
{#                onclick="removeBulletPoint(this, '{{ parent_index }}')">#}
{#            <i class="fa-solid fa-times"></i>#}
{#        </button>#}
{#        <button type="button"#}
{#                class="btn btn-circle btn-outline btn-info btn-sm opacity-70 hover:opacity-100 hover:bg-info hover:text-white transition-all"#}
{#                onclick="openEnhanceModal('{{ parent_index }}', '{{ index }}')">#}
{#            <i class="fa-solid fa-wand-magic-sparkles"></i>#}
{#        </button>#}
{#        <span id="enhance_indicator_{{ parent_index }}_{{ index }}" class="htmx-indicator">#}
{#            <span class="loading loading-spinner loading-xs"></span>#}
{#        </span>#}
{#    </div>#}
{#</div>#}
{##}
{# resumes/theme_partials/bullet_point_form_row.html #}
{#<div class="bullet-point-row flex items-start gap-3 group hover:bg-gray-50/80 dark:hover:bg-gray-800/20 p-2 rounded-md transition-colors">#}
{#    <div class="mt-3 text-primary">•</div>#}
{#    <div class="form-control flex-1">#}
{#        <div class="relative">#}
{#            <textarea class="textarea textarea-bordered w-full min-h-24 focus:border-primary focus:ring-1 focus:ring-primary pr-8"#}
{#                id="bullet_{{ parent_index }}_{{ index }}"#}
{#                name="bullet_{{ parent_index }}_{{ index }}"#}
{#                placeholder="Describe your achievement with action verbs and measurable results (e.g., 'Increased customer satisfaction by 20% through implementation of new service protocols')"#}
{#                onkeyup="checkBulletQuality(this)"#}
{#                data-parent="{{ parent_index }}"#}
{#                data-index="{{ index }}">{{ bullet_text|default:'' }}</textarea>#}
{#        </div>#}
{#        <div class="flex justify-between mt-1">#}
{#            <div class="bullet-quality text-xs"></div>#}
{#            <div class="text-xs char-counter text-gray-500">#}
{#                <span class="current">{{ bullet_text|default:''|length }}</span>/<span class="max">100-150 optimal</span>#}
{#            </div>#}
{#        </div>#}
{#    </div>#}
{#    <div class="flex flex-col gap-2">#}
{#        <button type="button" class="btn btn-circle btn-outline btn-error btn-sm mt-3 opacity-70 hover:opacity-100 hover:bg-error hover:text-white transition-all"#}
{#                onclick="removeBulletPoint(this, '{{ parent_index }}')">#}
{#            <i class="fa-solid fa-times"></i>#}
{#        </button>#}
{#        <button type="button"#}
{#                class="btn btn-circle btn-outline btn-info btn-sm opacity-70 hover:opacity-100 hover:bg-info hover:text-white transition-all"#}
{#                onclick="openEnhanceModal('{{ parent_index }}', '{{ index }}')">#}
{#            <i class="fa-solid fa-wand-magic-sparkles"></i>#}
{#        </button>#}
{#        <span id="enhance_indicator_{{ parent_index }}_{{ index }}" class="htmx-indicator">#}
{#            <span class="loading loading-spinner loading-xs"></span>#}
{#        </span>#}
{#    </div>#}
{#</div>#}